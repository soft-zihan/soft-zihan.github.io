# 📦 压缩与归档 (Compression & Archiving)

## 1. tar - 归档与压缩的万能钥匙

`tar` 本身只负责“打包”（把多个文件凑成一个包），配合参数才能调用压缩引擎。Linux使用tar.gz可以保留文件属性等信息，并适合脚本化处理。

#### 💡 黄金法则：记住 c 与 x

- **`c`** (Create)：**创建**压缩包。
- **`x`** (eXtract)：**提取/解压**压缩包。

#### 常用组合 (建议背诵)

- **`tar -czvf project.tar.gz /path`**：使用 **Gzip** 压缩。
  - **特点**：速度快，压缩率适中。服务器日志、源码包常用。
- **`tar -cjvf data.tar.bz2 /path`**：使用 **Bzip2** 压缩。
  - **特点**：压缩率比 Gzip 高，但比 XZ 快。
- **`tar -cJvf heavy_data.tar.xz /path`**：使用 **XZ** 压缩。
  - **特点**：速度慢，**压缩率极高**。分发大型安装包时常用。
- **`tar -xvf any_file.tar.gz`**：万能解压。
  - **技巧**：现代 `tar` 很聪明，你不必写 `z` 或 `J`，它能自动识别格式。
- **`tar -tf file.tar.gz`**：**预览内容**。在不解压的情况下查看包内有哪些文件。
- **`tar -xvf data.tar.gz -C /target/dir`**：解压到**指定目录**。

#### 参数详解

- `-f` (File)：**必须放在最后**，后面紧跟文件名。
- `-v` (Verbose)：显示正在处理的文件名。
- `-t` (List)：不解压，先看看包里有什么。
- **`--exclude='pattern'`**：打包时**排除**特定文件或目录。
  - *示例*：`tar -czvf app.tar.gz --exclude='node_modules' ./app`
- **提取特定文件**：不用解压全量包，只拿出一个文件。
  - *示例*：`tar -xvf data.tar.gz path/to/target_file.txt`

---

### 2. zip / unzip - 跨平台首选

当你需要把文件发给 Windows 用户时，请使用 ZIP。

- `zip -r data.zip dir/`：`-r` 表示递归，不加只能压进一个空文件夹。
- **`unzip -l data.zip`**：查看压缩包内容而不解压。
- `unzip data.zip -d /target`：解压到指定位置。

---

### 3. gzip / bzip2 - 单文件压缩

当你不需要打包，只需要压缩**单个大文件** (如 .sql 备份) 时使用。

- `gzip large_file.sql`：压缩为 `.gz` (原文件会消失)。
- `gunzip large_file.sql.gz`：解压。
- `bzip2 file` / `bunzip2 file.bz2`：压缩率比 gzip 稍高，但速度慢。

---

### 4. 选型建议

| 场景                        | 推荐格式    | 理由                       |
| :-------------------------- | :---------- | :------------------------- |
| **日常备份**          | `.tar.gz` | 速度与体积的完美平衡       |
| **极致节省空间**      | `.tar.xz` | 适合归档长期不用的老数据   |
| **发给 Windows 用户** | `.zip`    | 无需安装第三方工具即可打开 |
