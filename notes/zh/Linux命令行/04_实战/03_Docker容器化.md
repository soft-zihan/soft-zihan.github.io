# ğŸ³ Docker å®¹å™¨åŒ–

## 1. run - å¯åŠ¨å®¹å™¨

* **docker run -d -p 8080:80 --name my-app nginx**ï¼šåå°è¿è¡Œ nginxï¼Œæ˜ å°„ç«¯å£ï¼ŒæŒ‡å®šåç§°

  * **-d**ï¼šåå°è¿è¡Œ (Detached)
  * **-p `<host>`:`<container>`**ï¼šç«¯å£æ˜ å°„
  * **-v `<host>`:`<container>`**ï¼š**æŒ‚è½½å· (Volume)**ã€‚
    - **æ ¸å¿ƒç”¨é€”**ï¼š**æ•°æ®æŒä¹…åŒ–**ã€‚å®¹å™¨æ˜¯â€œæ˜“ç¢å“â€ï¼Œä¸€æ—¦åˆ é™¤ï¼Œå†…éƒ¨æ•°æ®ä¹Ÿä¼šæ¶ˆå¤±ã€‚æŒ‚è½½å·èƒ½å°†å®¹å™¨å†…çš„æ•°æ®ï¼ˆå¦‚æ•°æ®åº“æ–‡ä»¶ã€æ—¥å¿—ï¼‰å­˜æ”¾åœ¨å®¿ä¸»æœºä¸Šï¼Œå³ä½¿å®¹å™¨åˆ äº†ï¼Œæ•°æ®è¿˜åœ¨ã€‚
  * **--restart always**ï¼šå¼€æœºè‡ªå¯æˆ–å´©æºƒé‡å¯
* **docker run --rm -it ubuntu bash**ï¼šå¯åŠ¨ä¸´æ—¶å®¹å™¨è¿›å…¥äº¤äº’æ¨¡å¼ï¼Œé€€å‡ºåè‡ªåŠ¨åˆ é™¤

## 2. ps / stats - æŸ¥çœ‹å®¹å™¨çŠ¶æ€

* **docker ps**ï¼šåˆ—å‡ºæ­£åœ¨è¿è¡Œçš„å®¹å™¨
* **docker ps -a**ï¼šåˆ—å‡ºæ‰€æœ‰å®¹å™¨ (åŒ…æ‹¬å·²åœæ­¢çš„)
* **docker stats**ï¼šå®æ—¶æŸ¥çœ‹å®¹å™¨èµ„æºå ç”¨ (CPU/å†…å­˜)

## 3. exec / logs / inspect - è°ƒè¯•ä¸æ’éšœ
è¿™æ˜¯å®¹å™¨è¿ç»´æœ€é¢‘ç¹çš„æ“ä½œã€‚

* **docker logs -f `<container>`**ï¼šå®æ—¶è¿½è¸ªæ—¥å¿—ã€‚
* **docker exec -it `<container>` bash**ï¼šè¿›å…¥äº¤äº’ç»ˆç«¯ã€‚
* **ğŸ’¡ è¿›é˜¶ï¼š`docker inspect <container>`**
  - **åœºæ™¯**ï¼šæŸ¥çœ‹å®¹å™¨çš„å…ƒæ•°æ®ï¼ˆæŒ‚è½½è·¯å¾„ã€ç½‘ç»œé…ç½®ã€ç¯å¢ƒå˜é‡ï¼‰ã€‚
  - **æŠ€å·§ (ç®€å•æ˜“è®°ç‰ˆ)**ï¼š`docker inspect <ID> | grep IPAddress`
  - **æŠ€å·§ (ä¸“ä¸šç‰ˆ)**ï¼šç›´æ¥æŸ¥å®¹å™¨ IPï¼š`docker inspect -f '{{range .NetworkSettings.Networks}}{{.IPAddress}}{{end}}' <container>`ã€‚

---

## 4. images / build - é•œåƒç®¡ç†
* **docker images**ï¼šåˆ—å‡ºæœ¬åœ°é•œåƒã€‚
* **docker pull `<image>`**ï¼šä¸‹è½½é•œåƒã€‚
* **docker build -t my-image:v1 .**ï¼šæ ¹æ®å½“å‰ç›®å½•çš„ Dockerfile æ„å»ºã€‚
  - **ğŸ’¡ æŠ€å·§**ï¼šæ„å»ºå¤ªæ…¢ï¼Ÿå°è¯•ä½¿ç”¨ `--network=host` é¿å¼€å®¹å™¨ç½‘ç»œé—®é¢˜ã€‚

---

## 5. å¸¸è§è¿ç»´ç—›ç‚¹
- **ä¿®æ”¹äº† Docker é…ç½®ä¸ç”Ÿæ•ˆï¼Ÿ**
  - å®¹å™¨å†…çš„ç¨‹åºé€šå¸¸åªåœ¨å¯åŠ¨æ—¶è¯»å–é…ç½®ã€‚ä½ éœ€è¦ `docker restart <container>`ã€‚
  - å¦‚æœæ˜¯ä¿®æ”¹äº† `daemon.json` (Docker æœ¬èº«é…ç½®)ï¼Œéœ€æ‰§è¡Œ `sudo systemctl daemon-reload && sudo systemctl restart docker`ã€‚
- **ç£ç›˜è¢« Docker æ’‘çˆ†äº†ï¼Ÿ**
  - é™¤äº† `system prune`ï¼Œæ£€æŸ¥ `/var/lib/docker/containers/` ä¸‹çš„ **`.log` æ–‡ä»¶**ã€‚å¦‚æœå®¹å™¨è¾“å‡ºå¤ªå¤šä¸”æ²¡è®¾ç½®è½®è½¬ï¼Œå•ä¸ªæ—¥å¿—å¯èƒ½è¾¾åˆ°å‡ å GBã€‚

---

## 6. save/load/export/import - å¯¼å‡ºä¸å¯¼å…¥ (ç¦»çº¿éƒ¨ç½²å¿…å¤‡)

**åœºæ™¯ï¼šæœåŠ¡å™¨æ²¡å¤–ç½‘ï¼Œæˆ–è€…éœ€è¦æ‰‹åŠ¨æ¬è¿ç¯å¢ƒã€‚**

* **é’ˆå¯¹é•œåƒ (Image) - æ¨èï¼Œä¿ç•™æ„å»ºå±‚çº§**ï¼š

  * **docker save -o my-image.tar <image_name>**ï¼šæ‰“åŒ…é•œåƒ
  * **docker load -i my-image.tar**ï¼šåŠ è½½é•œåƒ
* **é’ˆå¯¹å®¹å™¨ (Container) - å¿«ç…§æ¨¡å¼**ï¼š

  * **docker export <container_id> > my-container.tar**ï¼šå¯¼å‡ºè¿è¡Œæ—¶çš„æ–‡ä»¶ç³»ç»Ÿ
  * **docker import my-container.tar <new_image_name>**ï¼šå¯¼å…¥ä¸ºæ–°é•œåƒ (ä¸¢å¤±å†å²å±‚çº§)

## 7. compose - å¤šå®¹å™¨ç¼–æ’

* **docker compose up -d**ï¼šæ ¹æ® **docker-compose.yml** **å¯åŠ¨æ‰€æœ‰æœåŠ¡ (æ–°ç‰ˆè¯­æ³•ï¼Œæ— éœ€ä¸­é—´æ¨ªæ )**
* **docker compose down**ï¼šåœæ­¢å¹¶åˆ é™¤å®¹å™¨ã€ç½‘ç»œ
* **docker compose logs -f**ï¼šæŸ¥çœ‹ç¼–æ’æœåŠ¡çš„æ‰€æœ‰æ—¥å¿—

> **ğŸ’¡** **Pro Tip**: æ¨èä½¿ç”¨ **lazydocker**ï¼Œå®ƒæ˜¯ä¸“é—¨ç”¨äº Docker çš„ç»ˆç«¯å›¾å½¢ç•Œé¢å·¥å…·ï¼Œèƒ½å¯è§†åŒ–çš„æŸ¥çœ‹æ—¥å¿—ã€é‡å¯å®¹å™¨ã€æ¸…ç†é•œåƒï¼Œä½“éªŒæä½³ã€‚
>
