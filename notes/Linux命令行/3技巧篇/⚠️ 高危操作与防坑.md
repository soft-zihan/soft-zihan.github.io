# ⚠️ 高危操作与防坑指南 (Safety First)

Linux 赋予了用户极高的权限，但也意味着误操作的代价巨大。以下是新手必须知道的“保命”法则。

## 1. 重定向陷阱

- **`>` vs `>>`**：

  - `>`：**覆盖**文件。如果文件存在，内容会被清空！
  - `>>`：**追加**内容到文件末尾。
  - *防坑习惯*：在执行重定向命令前，先用 `cat` 或 `echo` 检查输出，确认无误后再添加 `> filename`。
- **脚本中的 `set -e`**：

  - 在 Shell 脚本开头加上 `set -e` 可以让脚本在遇到错误时立即停止，防止错误级联。但在某些非关键错误（如 grep 未找到内容）时可能导致脚本意外中断，需谨慎使用。

## 2. 删除需谨慎 (rm)

- **致命空格**：

  - ❌ `rm -rf / usr/lib`：注意 `/` 后面的空格！这会尝试删除根目录。
  - ✅ `rm -rf /usr/lib`：正确写法。
  - *防坑习惯*：永远不要手动输入包含 `rm -rf` 的长路径，**尽量使用 Tab 键补全**，或者先用 `ls` 确认路径，或者先`cd`过去。
- **使用回收站**：

  - 推荐安装 **`trash-cli`**。
  - 设置别名：`alias rm='trash'`。这样执行 `rm` 时会将文件移动到回收站，而不是直接物理删除。

## 3. 权限管理

- **避免 `chmod 777`**：
  - `777` 意味着任何人都可以读、写、执行该文件，极不安全。
  - **推荐**：
    - 文件：`644` (所有者读写，其他人只读)
    - 目录：`755` (所有者读写执行，其他人读执行)
    - 脚本/可执行文件：`700` (仅所有者可执行) 或 `755`。

## 4. 别名保护

- 可以在 `.bashrc` 或 `.zshrc` 中添加以下别名，强制在删除或覆盖前询问：
  ```bash
  alias rm='rm -i'
  alias cp='cp -i'
  alias mv='mv -i'
  ```
