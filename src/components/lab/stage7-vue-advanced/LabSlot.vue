<template>
  <div class="space-y-8">
    <!-- Header -->
    <div class="text-center mb-8">
      <h2 class="text-2xl font-bold text-gray-800 dark:text-gray-100 mb-2">ğŸ {{ lang === 'zh' ? 'æ’æ§½ç³»ç»Ÿ' : 'Slot System' }}</h2>
      <p class="text-gray-600 dark:text-gray-400 text-sm">{{ lang === 'zh' ? 'ç†è§£æ’æ§½ï¼ˆSlotï¼‰å¦‚ä½•è®©ç»„ä»¶æ›´çµæ´»å’Œå¯å¤ç”¨' : 'Understand how slots make components flexible and reusable' }}</p>
    </div>

    <!-- Main Container -->
    <div class="max-w-4xl mx-auto space-y-12">

      <!-- Part 1: Basic Slot (Default Slot) -->
      <section class="bg-white/80 dark:bg-gray-800/80 rounded-2xl p-8 border border-gray-200 dark:border-gray-700 shadow-lg">
        <h3 class="text-lg font-bold text-gray-800 dark:text-gray-100 mb-4 flex items-center gap-2">
          <span class="text-2xl">1ï¸âƒ£</span> {{ lang === 'zh' ? 'åŸºç¡€æ’æ§½' : 'Default Slot' }}
        </h3>
        
        <p class="text-sm text-gray-600 dark:text-gray-400 mb-6">
          {{ lang === 'zh' ? 'æ’æ§½å…è®¸çˆ¶ç»„ä»¶å‘å­ç»„ä»¶ä¼ é€’å†…å®¹ã€‚&lt;slot&gt; æ ‡ç­¾æ˜¯å­ç»„ä»¶ä¸­çš„å ä½ç¬¦ï¼Œçˆ¶ç»„ä»¶å¯ä»¥å¡«å……ä»»æ„å†…å®¹ã€‚' : 'Slots allow parent components to pass content to child components. The &lt;slot&gt; tag is a placeholder that can be filled with any content.' }}
        </p>

        <!-- Demo -->
        <div class="bg-blue-50 dark:bg-blue-900/20 rounded-xl p-6 mb-6">
          <p class="text-sm font-bold text-blue-700 dark:text-blue-300 mb-4">{{ lang === 'zh' ? 'å¡ç‰‡ç»„ä»¶ç¤ºä¾‹ï¼š' : 'Card Component Demo:' }}</p>
          
          <!-- Card 1 -->
          <div class="bg-white dark:bg-gray-800 rounded-lg p-6 border-2 border-blue-300 dark:border-blue-600 mb-4 shadow-sm">
            <div class="flex items-center gap-3 mb-3">
              <span class="text-3xl">ğŸ“</span>
              <h4 class="font-bold text-gray-800 dark:text-gray-200">{{ lang === 'zh' ? 'å­¦ä¹  Vue' : 'Learn Vue' }}</h4>
            </div>
            <p class="text-sm text-gray-600 dark:text-gray-400">
              {{ lang === 'zh' ? 'Vue æ˜¯ä¸€ä¸ªæ¸è¿›å¼æ¡†æ¶ï¼Œæ˜“äºå­¦ä¹ ä¸”åŠŸèƒ½å¼ºå¤§ã€‚' : 'Vue is a progressive framework that\'s easy to learn and powerful.' }}
            </p>
          </div>

          <!-- Card 2 -->
          <div class="bg-white dark:bg-gray-800 rounded-lg p-6 border-2 border-green-300 dark:border-green-600 mb-4 shadow-sm">
            <div class="flex items-center gap-3 mb-3">
              <span class="text-3xl">ğŸ’¡</span>
              <h4 class="font-bold text-gray-800 dark:text-gray-200">{{ lang === 'zh' ? 'æœ€ä½³å®è·µ' : 'Best Practice' }}</h4>
            </div>
            <p class="text-sm text-gray-600 dark:text-gray-400">
              {{ lang === 'zh' ? 'å§‹ç»ˆä½¿ç”¨æ’æ§½ä½¿ç»„ä»¶æ›´çµæ´»å’Œå¯å¤ç”¨ã€‚' : 'Always use slots to make components flexible and reusable.' }}
            </p>
          </div>

          <!-- Card 3 -->
          <div class="bg-white dark:bg-gray-800 rounded-lg p-6 border-2 border-purple-300 dark:border-purple-600 shadow-sm">
            <div class="flex items-center gap-3 mb-3">
              <span class="text-3xl">ğŸš€</span>
              <h4 class="font-bold text-gray-800 dark:text-gray-200">{{ lang === 'zh' ? 'å¿«é€Ÿå¼€å‘' : 'Quick Dev' }}</h4>
            </div>
            <p class="text-sm text-gray-600 dark:text-gray-400">
              {{ lang === 'zh' ? 'ä½¿ç”¨æ’æ§½å¯ä»¥å¿«é€Ÿåˆ›å»ºå¯é…ç½®çš„ç»„ä»¶ã€‚' : 'Slots allow you to quickly create configurable components.' }}
            </p>
          </div>
        </div>

        <!-- Code -->
        <div class="grid md:grid-cols-2 gap-4 mb-6">
          <div>
            <p class="text-xs font-bold text-gray-700 dark:text-gray-300 mb-2">{{ lang === 'zh' ? 'ğŸ“„ å­ç»„ä»¶ (Card.vue)' : 'Child Component (Card.vue)' }}</p>
            <div class="bg-gray-900 text-blue-200 p-3 rounded-lg font-mono text-xs overflow-x-auto">
              <pre>{{ basicSlotChild }}</pre>
            </div>
          </div>
          <div>
            <p class="text-xs font-bold text-gray-700 dark:text-gray-300 mb-2">{{ lang === 'zh' ? 'ğŸ“„ çˆ¶ç»„ä»¶ (Parent.vue)' : 'Parent Component (Parent.vue)' }}</p>
            <div class="bg-gray-900 text-blue-200 p-3 rounded-lg font-mono text-xs overflow-x-auto">
              <pre>{{ basicSlotParent }}</pre>
            </div>
          </div>
        </div>
      </section>

      <!-- Part 2: Named Slots -->
      <section class="bg-white/80 dark:bg-gray-800/80 rounded-2xl p-8 border border-gray-200 dark:border-gray-700 shadow-lg">
        <h3 class="text-lg font-bold text-gray-800 dark:text-gray-100 mb-4 flex items-center gap-2">
          <span class="text-2xl">2ï¸âƒ£</span> {{ lang === 'zh' ? 'å…·åæ’æ§½' : 'Named Slots' }}
        </h3>
        
        <p class="text-sm text-gray-600 dark:text-gray-400 mb-6">
          {{ lang === 'zh' ? 'å…·åæ’æ§½è®©ä½ åœ¨ä¸€ä¸ªç»„ä»¶ä¸­å®šä¹‰å¤šä¸ª &lt;slot&gt;ï¼Œæ¯ä¸ªæ’æ§½æœ‰ä¸åŒçš„åå­—ï¼Œçˆ¶ç»„ä»¶å¯ä»¥é’ˆå¯¹æ€§åœ°å¡«å……ã€‚' : 'Named slots allow you to define multiple slots in a component, each with a different name, enabling targeted content insertion from parent components.' }}
        </p>

        <!-- Demo -->
        <div class="bg-green-50 dark:bg-green-900/20 rounded-xl p-6 mb-6 space-y-6">
          <p class="text-sm font-bold text-green-700 dark:text-green-300">{{ lang === 'zh' ? 'ğŸ‘¤ ç”¨æˆ·èµ„æ–™å¡ç¤ºä¾‹ï¼š' : 'User Profile Card Demo:' }}</p>
          
          <!-- Profile Card -->
          <div class="bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden">
            <!-- Header Slot -->
            <div class="bg-gradient-to-r from-green-400 to-green-600 p-6 text-white">
              <div class="text-center">
                <div class="text-5xl mb-2">ğŸ‘¨â€ğŸ’»</div>
                <h4 class="font-bold text-lg">{{ lang === 'zh' ? 'å¼ ä¸‰' : 'John Doe' }}</h4>
                <p class="text-sm opacity-90">{{ lang === 'zh' ? 'Vue å¼€å‘è€…' : 'Vue Developer' }}</p>
              </div>
            </div>

            <!-- Content Slot -->
            <div class="p-6 border-b border-gray-200 dark:border-gray-700">
              <h5 class="font-bold text-gray-800 dark:text-gray-200 mb-2">{{ lang === 'zh' ? 'ğŸ“ ç®€ä»‹' : 'Bio' }}</h5>
              <p class="text-sm text-gray-600 dark:text-gray-400">
                {{ lang === 'zh' ? 'å–œæ¬¢å‰ç«¯å¼€å‘ï¼Œä¸“æ³¨äº Vue å’Œç°ä»£ JavaScriptã€‚' : 'Passionate about frontend development, focused on Vue and modern JavaScript.' }}
              </p>
            </div>

            <!-- Footer Slot -->
            <div class="bg-gray-50 dark:bg-gray-900 p-4 flex gap-2 justify-center">
              <button class="px-4 py-2 bg-green-500 text-white rounded font-bold text-sm hover:bg-green-600">
                {{ lang === 'zh' ? 'å…³æ³¨' : 'Follow' }}
              </button>
              <button class="px-4 py-2 bg-gray-400 text-white rounded font-bold text-sm hover:bg-gray-500">
                {{ lang === 'zh' ? 'æ¶ˆæ¯' : 'Message' }}
              </button>
            </div>
          </div>
        </div>

        <!-- Code -->
        <div class="grid md:grid-cols-2 gap-4">
          <div>
            <p class="text-xs font-bold text-gray-700 dark:text-gray-300 mb-2">{{ lang === 'zh' ? 'ğŸ“„ å­ç»„ä»¶ (Profile.vue)' : 'Child Component (Profile.vue)' }}</p>
            <div class="bg-gray-900 text-blue-200 p-3 rounded-lg font-mono text-xs overflow-x-auto">
              <pre>{{ namedSlotChild }}</pre>
            </div>
          </div>
          <div>
            <p class="text-xs font-bold text-gray-700 dark:text-gray-300 mb-2">{{ lang === 'zh' ? 'ğŸ“„ ä½¿ç”¨æ–¹å¼' : 'Usage' }}</p>
            <div class="bg-gray-900 text-blue-200 p-3 rounded-lg font-mono text-xs overflow-x-auto">
              <pre>{{ namedSlotUsage }}</pre>
            </div>
          </div>
        </div>
      </section>

      <!-- Part 3: Scoped Slots -->
      <section class="bg-white/80 dark:bg-gray-800/80 rounded-2xl p-8 border border-gray-200 dark:border-gray-700 shadow-lg">
        <h3 class="text-lg font-bold text-gray-800 dark:text-gray-100 mb-4 flex items-center gap-2">
          <span class="text-2xl">3ï¸âƒ£</span> {{ lang === 'zh' ? 'ä½œç”¨åŸŸæ’æ§½ï¼ˆè¿›é˜¶ï¼‰' : 'Scoped Slots (Advanced)' }}
        </h3>
        
        <p class="text-sm text-gray-600 dark:text-gray-400 mb-6">
          {{ lang === 'zh' ? 'ä½œç”¨åŸŸæ’æ§½è®©å­ç»„ä»¶èƒ½å‘çˆ¶ç»„ä»¶ä¼ é€’æ•°æ®ã€‚å­ç»„ä»¶å¯ä»¥åœ¨æ’æ§½ä¸­ç»‘å®šå˜é‡ï¼Œçˆ¶ç»„ä»¶å¯ä»¥é€šè¿‡ #default="{ data }" æ¥æ”¶ã€‚' : 'Scoped slots allow child components to pass data to parent components. Child components bind variables in slots, and parent components receive them via #default="{ data }".' }}
        </p>

        <!-- Demo -->
        <div class="bg-purple-50 dark:bg-purple-900/20 rounded-xl p-6 mb-6">
          <p class="text-sm font-bold text-purple-700 dark:text-purple-300 mb-4">{{ lang === 'zh' ? 'ğŸ“‹ åˆ—è¡¨æ¸²æŸ“ç¤ºä¾‹ï¼š' : 'List Rendering Demo:' }}</p>
          
          <div class="space-y-3">
            <!-- Item 1 -->
            <div v-for="(fruit, idx) in fruits" :key="idx" class="flex items-center gap-3 bg-white dark:bg-gray-800 p-4 rounded-lg border border-purple-300 dark:border-purple-600">
              <div class="text-3xl">{{ fruit.icon }}</div>
              <div class="flex-1">
                <h5 class="font-bold text-gray-800 dark:text-gray-200">{{ fruit.name }}</h5>
                <p class="text-sm text-gray-500">{{ lang === 'zh' ? 'ä»·æ ¼ï¼š' : 'Price: ' }} <span class="font-bold text-purple-600">Â¥{{ fruit.price }}</span></p>
              </div>
              <button 
                @click="addToCart(idx)"
                class="px-3 py-1 bg-purple-500 text-white rounded font-bold text-sm hover:bg-purple-600"
              >
                {{ lang === 'zh' ? 'åŠ è´­' : 'Add' }}
              </button>
            </div>
          </div>
        </div>

        <!-- Code -->
        <div class="grid md:grid-cols-2 gap-4">
          <div>
            <p class="text-xs font-bold text-gray-700 dark:text-gray-300 mb-2">{{ lang === 'zh' ? 'ğŸ“„ å­ç»„ä»¶ (List.vue)' : 'Child Component (List.vue)' }}</p>
            <div class="bg-gray-900 text-blue-200 p-3 rounded-lg font-mono text-xs overflow-x-auto">
              <pre>{{ scopedSlotChild }}</pre>
            </div>
          </div>
          <div>
            <p class="text-xs font-bold text-gray-700 dark:text-gray-300 mb-2">{{ lang === 'zh' ? 'ğŸ“„ ä½¿ç”¨æ–¹å¼' : 'Usage' }}</p>
            <div class="bg-gray-900 text-blue-200 p-3 rounded-lg font-mono text-xs overflow-x-auto">
              <pre>{{ scopedSlotUsage }}</pre>
            </div>
          </div>
        </div>
      </section>

      <!-- Part 4: Key Concept -->
      <section class="bg-white/80 dark:bg-gray-800/80 rounded-2xl p-8 border border-gray-200 dark:border-gray-700 shadow-lg">
        <h3 class="text-lg font-bold text-gray-800 dark:text-gray-100 mb-4 flex items-center gap-2">
          <span class="text-2xl">ğŸ’¡</span> {{ lang === 'zh' ? 'ä¸ºä»€ä¹ˆä½¿ç”¨æ’æ§½ï¼Ÿ' : 'Why Use Slots?' }}
        </h3>
        
        <div class="space-y-4">
          <div class="flex gap-3 items-start">
            <span class="text-2xl">âœ…</span>
            <div>
              <p class="font-bold text-gray-800 dark:text-gray-200 text-sm mb-1">{{ lang === 'zh' ? 'æé«˜ç»„ä»¶å¤ç”¨æ€§' : 'Increase Component Reusability' }}</p>
              <p class="text-sm text-gray-600 dark:text-gray-400">{{ lang === 'zh' ? 'åŒä¸€ä¸ªå¡ç‰‡ç»„ä»¶å¯ä»¥æ˜¾ç¤ºä¸åŒå†…å®¹ï¼Œä¸éœ€è¦ä¸ºæ¯ç§æƒ…å†µåˆ›å»ºæ–°ç»„ä»¶ã€‚' : 'The same card component can display different content without creating new components for each case.' }}</p>
            </div>
          </div>
          
          <div class="flex gap-3 items-start">
            <span class="text-2xl">âœ…</span>
            <div>
              <p class="font-bold text-gray-800 dark:text-gray-200 text-sm mb-1">{{ lang === 'zh' ? 'çˆ¶ç»„ä»¶æ›´çµæ´»' : 'More Flexible Parent Components' }}</p>
              <p class="text-sm text-gray-600 dark:text-gray-400">{{ lang === 'zh' ? 'çˆ¶ç»„ä»¶å¯ä»¥å®Œå…¨æ§åˆ¶å­ç»„ä»¶æ˜¾ç¤ºçš„å†…å®¹ç»“æ„ã€‚' : 'Parent components can fully control the content structure displayed by child components.' }}</p>
            </div>
          </div>

          <div class="flex gap-3 items-start">
            <span class="text-2xl">âœ…</span>
            <div>
              <p class="font-bold text-gray-800 dark:text-gray-200 text-sm mb-1">{{ lang === 'zh' ? 'ä»£ç æ›´ç®€æ´' : 'Cleaner Code' }}</p>
              <p class="text-sm text-gray-600 dark:text-gray-400">{{ lang === 'zh' ? 'æ— éœ€ä½¿ç”¨å¤§é‡çš„ props æ¥é…ç½®ç»„ä»¶çš„æ¯ä¸ªç»†èŠ‚ã€‚' : 'No need to use many props to configure every detail of the component.' }}</p>
            </div>
          </div>
        </div>
      </section>

    </div>
  </div>
</template>

<script setup lang="ts">
import { ref } from 'vue';

const props = defineProps<{
  lang: 'en' | 'zh';
}>();

const fruits = ref([
  { name: props.lang === 'zh' ? 'è‹¹æœ' : 'Apple', icon: 'ğŸ', price: 5 },
  { name: props.lang === 'zh' ? 'é¦™è•‰' : 'Banana', icon: 'ğŸŒ', price: 3 },
  { name: props.lang === 'zh' ? 'è‘¡è„' : 'Grapes', icon: 'ğŸ‡', price: 8 },
]);

const addToCart = (idx: number) => {
  fruits.value[idx].price += 0.5;
};

// Code snippets
const basicSlotChild = `<!-- Card.vue -->
<template>
  <div class="card">
    <slot></slot>
  </div>
</template>

<style scoped>
.card {
  border: 2px solid;
  padding: 16px;
  border-radius: 8px;
}
</style>`;

const basicSlotParent = `<!-- Parent.vue -->
<template>
  <Card>
    <p>ğŸ’¡ è¿™æ˜¯æ’æ§½çš„å†…å®¹</p>
  </Card>
</template>`;

const namedSlotChild = `<!-- Profile.vue -->
<template>
  <div class="profile">
    <slot name="header"></slot>
    <slot name="content"></slot>
    <slot name="footer"></slot>
  </div>
</template>`;

const namedSlotUsage = `<!-- ä½¿ç”¨æ–¹å¼ -->
<Profile>
  <template #header>
    å¤´éƒ¨å†…å®¹
  </template>
  
  <template #content>
    ä¸­é—´å†…å®¹
  </template>
  
  <template #footer>
    åº•éƒ¨å†…å®¹
  </template>
</Profile>`;

const scopedSlotChild = `<!-- List.vue -->
<template>
  <div>
    <slot 
      v-for="item in items"
      :item="item"
      :index="index"
    ></slot>
  </div>
</template>`;

const scopedSlotUsage = `<!-- æ¥æ”¶æ•°æ® -->
<List :items="fruits">
  <template #default="{ item }">
    <div>{{ item.name }}</div>
  </template>
</List>`;
</script>
