<template>
  <div class="space-y-12">
    <section>
      <div class="max-w-3xl mx-auto px-4 mb-6">
        <p class="text-sm text-gray-600 dark:text-gray-400 bg-gray-50 dark:bg-gray-800/50 rounded-xl p-4 border-l-4 border-indigo-400">
          ğŸ’¡ {{ isZh ? 'Props æ˜¯çˆ¶â†’å­å•å‘æ•°æ®æµï¼ŒEmit æ˜¯å­â†’çˆ¶äº‹ä»¶é€šä¿¡ã€‚' : 'Props are parentâ†’child one-way data flow, Emit is childâ†’parent event communication.' }}
        </p>
      </div>
      <h2 class="text-xl font-bold text-indigo-600 dark:text-indigo-400 mb-4 flex items-center gap-2">
        <span class="text-2xl">ğŸ“¡</span> {{ t.lab_props_title }}
      </h2>
      <LabPropsEmit :lang="lang" />
    </section>

    <section>
      <h2 class="text-xl font-bold text-green-600 dark:text-green-400 mb-4 flex items-center gap-2">
        <span class="text-2xl">ğŸ</span> {{ isZh ? 'æ’æ§½ç³»ç»Ÿ' : 'Slot System' }}
      </h2>
      <LabSlot :lang="lang" />
    </section>

    <section>
      <div class="max-w-3xl mx-auto px-4 mb-6">
        <p class="text-sm text-gray-600 dark:text-gray-400 bg-gray-50 dark:bg-gray-800/50 rounded-xl p-4 border-l-4 border-green-400">
          ğŸ’¡ {{ isZh ? 'Composables æ˜¯ Vue 3 çš„é€»è¾‘å¤ç”¨æ–¹æ¡ˆã€‚' : `Composables are Vue 3's logic reuse pattern.` }}
        </p>
      </div>
      <h2 class="text-xl font-bold text-green-600 dark:text-green-400 mb-4 flex items-center gap-2">
        <span class="text-2xl">ğŸ§©</span> {{ isZh ? 'Composables ç»„åˆå¼å‡½æ•°' : 'Composables' }}
      </h2>
      <LabComposables :lang="lang" />
    </section>

    <section>
      <div class="max-w-3xl mx-auto px-4 mb-6">
        <p class="text-sm text-gray-600 dark:text-gray-400 bg-gray-50 dark:bg-gray-800/50 rounded-xl p-4 border-l-4 border-indigo-400">
          ğŸ’¡ {{ isZh ? 'Pinia æ˜¯ Vue å®˜æ–¹æ¨èçš„çŠ¶æ€ç®¡ç†åº“ã€‚' : `Pinia is Vue's official state management library.` }}
        </p>
      </div>
      <h2 class="text-xl font-bold text-indigo-600 dark:text-indigo-400 mb-4 flex items-center gap-2">
        <span class="text-2xl">ğŸ</span> {{ isZh ? 'Pinia çŠ¶æ€ç®¡ç†' : 'Pinia State Management' }}
      </h2>
      <LabPinia :lang="lang" />
    </section>

    <section>
      <h2 class="text-xl font-bold text-teal-600 dark:text-teal-400 mb-4 flex items-center gap-2">
        <span class="text-2xl">ğŸ’‰</span> {{ isZh ? 'ä¾èµ–æ³¨å…¥' : 'Dependency Injection' }}
      </h2>
      <LabProvideInject :lang="lang" />
    </section>

    <NextStageGuide
      :is-zh="isZh"
      :next-text="isZh ? 'Vue è¿›é˜¶å®Œæˆï¼è¿›å…¥æŒ‘æˆ˜èµ›ã€‚' : 'Vue advanced done! Enter the challenge.'"
      @next="emit('navigate', 'challenge')"
    />
  </div>
</template>

<script setup lang="ts">
import { computed } from 'vue'
import { I18N } from '../../../constants'
import NextStageGuide from '../NextStageGuide.vue'
import LabPropsEmit from '../stage7-vue-advanced/LabPropsEmit.vue'
import LabSlot from '../stage7-vue-advanced/LabSlot.vue'
import LabComposables from '../stage7-vue-advanced/LabComposables.vue'
import LabPinia from '../stage7-vue-advanced/LabPinia.vue'
import LabProvideInject from '../stage7-vue-advanced/LabProvideInject.vue'

const props = defineProps<{
  lang: 'en' | 'zh'
}>()

const emit = defineEmits<{
  (e: 'navigate', tab: string): void
}>()

const lang = computed(() => props.lang)
const isZh = computed(() => lang.value === 'zh')
const t = computed(() => I18N[lang.value])
</script>
